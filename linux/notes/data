Системы хранения данных
	Самый первый накопитель - камень :-)
	Ленточные накопители
		Главное достоинство - срок хранения
		Магнитный барабан, перфокарты, ферриты
			МК-52, калькулятор, ферритовые сердечники, память
		Магнитная лента
	Современные системы хранения данных
		ЖД, флеш-память, оптические накопители
		Роботизированные библиотеки со съемными накопителями
	Классификация памяти компьютера:
		Основная память:
			-регистры, кэш ЦПУ(многоуровневый), ОЗУ
		Дополнительная память
			-жесткие диски(не факт что заработает через несколько лет), ssd(меньше боится физических нагрузок)
		Съемные накопители
			-CD/DVD-RW
	Интерфейсы подключения накопителей:
		IDE/ATAPI/AoE
		SCSI/.../Ultra-320 SCSI / iSCSI //скази, совершенная система команд, протокол для работы по сети
		SATA/eSATA - serial ata, e - внешний
		SAS - Serial attached scsi, один проводник лучше нескольких из-за влияния одних проводников на другие	
		FibreChannel/FCoE - оптический кабель и протокол, over ethernet.
		InfiniBand - высокая пропускная способность, могут присоединяться системы внешнего хранения данных, медь
		USB/IEE 1384, USB | FireWire
		Thunderbolt - универсальный разъем
Типы дополнительной памяти
	DAS - direct attached storage
	NAS - network attached storage
	SAN - storage area network 
		массив блоков, набор дисков
			множественный доступ, диски виртуальых машин
	Интерфейсы SAN
		  ATA over Ethernet (AoE)
		  Fibre Channel Protocol (FCP)
		  Fibre Channel over Ethernet (FCoE)		
		  iSCSI	
		  InfiniBand
Дисковые полки - один или два контроллера, надежность, возможность параллельной работы.
атомарность операций
Батарейка, кэш, восстановление питания.
RAID из SSD, недостаток SSD, ненадежность перезаписи, сложность уничтожения информации
SSD умирают переставая писать, но не переставая читать
RAID
	REDUNDED ARRAY OF INEXPENSIVE DISKS
			  INDEPENDED
Комбинирование обычных дисков
Стандарты RAID
0 - массив с чередованием блоков, прирост производительности за счёт оаспараллеливания, надежность падает прямо пропорционально кол-ву дисков
1 - mirroring, больная надежность, может увеличиваться скорость чтения
2 - чередование битов с кодом Хэмминга, почти не встречается
3 - часто встречается в аппаратном RAID, контрольный байт на отдельном диске
4 - контрольные суммы на отдельном диске, работа с блоками
5 - тоже, что и 4, но с чередованием
6 - два контрольных блока с чередованием, выдержит выход из строя двух дисков
RAID DP 
Контрольные суммы - XOR
	Суммирование с переполнением, 
	RAID из N дисков, каждый бит строки - сумма по модулю два двух других
	Мы можем потерять любую строчку, но её можно восстановить из двух оставшихся
	Пример: RAID, массив, 4 диска с данными, ещё 2, 4 RAID, 
6 - два контрольных блока с шифрованием
Алгоритм с диагональной четностью
	Контрольные суммы на двух крайних дисках
		Контрольные суммы по строке и по диагонали
		При пересчете контрольных сумм при отказе дисков в буфере можно держать прочитанное значение следущего блока
	MATRIX_RAID(встроенный, intell)
		Идея заключается в том, что одни и те же диски можно использовать для одного и другого RAID
	Комбинированные RAID
		0+1 - зеркало из чередующихся томов
		1+0 - чередование зеркал //распространённая конфигурация, зеркала + том с чередованием
		5+1 - зеркало из массивов RAID 5
Системы хранения в linux
	Работа с блоковыми устройствами
		/dev/sd*
			MBR
				основные: 1,2,3,4
				логические: 5,6,7,...,15
			GPT	1..128		
		Файлы устройств не имеют размера, но имеют старший и младший номер
Расширенные разделы:
	смещение 446, 4 раздела, создаётся раздел специального типа, описывающий часть диска, разделенную на разделы
testdisk, photorec, структура таблицы разделов
sfdisk --help умеет создавать копию таблицы разделов, умеет сохранять и восстанавливать резервные копии
	-O, -I
Номера смещений запасных суперблоков
/dev/sda5 - extended
Программный RAID в линукс
   mdadm --create --verbose /dev/md0 --level=linear --raid-devices=2 /dev/sdb6 /dev/sdc5
	mdadm -C /dev/md0 -l 5 -n 3 -x 1 /dev/sda[4-8]
Реализация в модуле ядра
fdisk
	t fd (type reaid autodetect)
Не умеет говорить про изменение таблицы разделов ядру
lvm
	pvcreate
	pvdisplay
	vgcreate - группа томов на разных физических дисках
	vgdisplay
	lvcreate
	lvdisplay
	lvextend
	resize2fs -f
	vgcfgbackup vgcfgrestore
	fsck.ext4 -f
	/etc/lvm/backup - бэкап метаданных
		archive
	при создании нового тома не форматируется старый, по возможности
		снимки по времени
